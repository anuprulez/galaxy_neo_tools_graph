Query:

SELECT 
    workflow.id as wf_id,
    workflow.update_time as wf_updated,
    ws_in.id as in_id,
    ws_in.tool_id as in_tool,
    ws_in.tool_version as in_tool_v,
    ws_out.id as out_id,
    ws_out.tool_id as out_tool,
    ws_out.tool_version as out_tool_v,
    wsi.name as tool_inputs,
    wo.output_name as tool_outputs,
    sw.published as published
FROM workflow_step_connection wfc
LEFT JOIN workflow_step ws_in ON ws_in.id = wfc.output_step_id
LEFT JOIN workflow_step_input wsi ON wfc.input_step_input_id = wsi.id
LEFT JOIN workflow_step ws_out ON ws_out.id = wsi.workflow_step_id
LEFT JOIN workflow_output as wo ON wo.workflow_step_id = wsi.workflow_step_id
LEFT JOIN workflow on ws_in.workflow_id = workflow.id
LEFT JOIN stored_workflow as sw on sw.latest_workflow_id = workflow.id
WHERE workflow.id in (
    SELECT workflow.id 
    FROM stored_workflow
    LEFT JOIN workflow on stored_workflow.latest_workflow_id = workflow.id
)

MATCH (t:Tool)<-[:IS_VERSION_OF]-(v:Version)-[:GENERATES_OUTPUT]->(o:ToolOutput)-[:HAS_DATATYPE]->(d:Datatype{name:"vcf"}) WITH t,v,o,d MATCH (v)-[:TAKES_INPUT]->(i:ToolInput)-[:HAS_DATATYPE]->(d2:Datatype{name:"bam"}) RETURN DISTINCT t,v,o,d,i,d2

MATCH (a:Tool { name: "trimmomatic"}), (b:Tool { name: "bowtie2"}), p = shortestPath((a)-[*]-(b)) WHERE length(p) > 1 RETURN p
